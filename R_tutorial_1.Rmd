---
title: "Programming with R --- A Beginners’ Guide for Geoscientists"
subtitle: "1 - Introduction"
author: "Tobias Stephan"
date: "25/01/2022"
output: 
  html_document:
    theme: "united"
    highlight: "kate"
    toc: true
    toc_depth: 3
    toc_float: 
      collapsed: false
      smooth_scroll: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

---

## Obtaining R
[**R**](https://cran.r-project.org/) is available for Linux, MacOS, and Windows. Software can be downloaded from The Comprehensive R Archive Network (CRAN):
(https://cran.r-project.org/)

## Editor
Editors are software programs that enable the user to create and edit text files. They also offer compilation, syntax highlighting, and many more useful features. The undisputedly best editor for R is [**RStudio**](https://www.rstudio.com/products/rstudio/download/). Please download the free editor at https://www.rstudio.com/products/rstudio/download/

---


# Coding Basics

## Operators
You can use R as a calculator with the following operators:

Operator |	Description 
------- | ------------  
`+` |addition 
`-` |subtraction 
`*` |multiplication 
`/` | division 
`^` or `**` | exponentiation 
`%%` | [Modulus](https://en.wikipedia.org/wiki/Modulo_operation) (Remainder from division) 
`%/%` |	Integer Division 
 
```{r basics1, echo = TRUE}
1 + 2
1 - 2 # everything that comes after the '#' character will be ignored. People therefor use it to comment lines
1 / 200 * 30 # Comment 
(59 + 73 + 2) / 3 # Distributive property
15 / 2
15 %/% 2 # the integer divison (%/%) rounds the result down to the nearest whole number
364 %% 360 # Modulo operation
```
## Logical Operators
In programming, you often need to know if an expression is true or false.
You can evaluate any expression in R, and get one of two answers, `TRUE` or `FALSE`.

Logical Operators ("Booleans") include:

Operator |	Description
------- | ------------
`>` |	greater than
`>=` | 	greater than or equal to
`==` | 	exactly equal to
`!=` | 	not equal to 

When you compare two values, the expression is evaluated and R returns the logical answer:
```{r basics2, echo = TRUE}
1 < 2
1 == 2
1 > 2
1 != 2
```

## Creating new variables (assignment)

You can create new objects with `<-`:
```{r basics3, echo = TRUE}
x <- 3 * 4
```
All R statements where you create objects, assignment statements, have the same form:

`object_name <- value`


When reading that code say “object name gets value” in your head.

> You will make lots of assignments and `<-` is a pain to type. Don’t be lazy and use `=`: it will work, but it will cause confusion later. Instead, use RStudio’s keyboard shortcut: `Alt` + `-` (the minus sign). Notice that RStudio automagically surrounds `<-` with spaces, which is a good code formatting practice. Code is miserable to read on a good day, so giveyoureyesabreak and use spaces.

Object names must start with a letter, and can only contain letters, numbers, `_` and `.`. You want your object names to be descriptive, so you’ll need a convention for multiple words. It is recommended to use **snake_case** where you separate lowercase words with `_`.

```{r basics4, eval=FALSE, include=TRUE, echo=TRUE}
i_use_snake_case
otherPeopleUseCamelCase
some.people.use.periods
And_aFew.People_RENOUNCEconvention
```

You can inspect an object by typing its name:
```{r basics5, echo = TRUE}
x
```

Make another assignment:
```{r basics6, echo = TRUE}
this_is_a_really_long_name <- 2.5
```

To inspect this object, try out RStudio’s completion facility: type “this”, press `TAB`, add characters until you have a unique prefix, then press return.

## Calling functions
R has a large collection of built-in functions that are called like this:

```{r funs1, eval=FALSE, include=TRUE, echo=TRUE}
function_name(arg1 = val1, arg2 = val2, ...)
```

Let’s try using `seq()` which makes regular **seq**uences of numbers and, while we’re at it, learn more helpful features of RStudio. Type se and hit TAB. A popup shows you possible completions. Specify `seq()` by typing more (a “q”) to disambiguate, or by using ↑/↓ arrows to select. Notice the floating tooltip that pops up, reminding you of the function’s arguments and purpose. If you want more help, press F1 to get all the details in the help tab in the lower right pane.

Press TAB once more when you’ve selected the function you want. RStudio will add matching opening (`(`) and closing `(`)) parentheses for you. Type the arguments `1`, `10` and hit return.

```{r funs2, echo = TRUE}
seq(1, 10)
```

If you make an assignment, you don’t get to see the value. You’re then tempted to immediately double-check the result:
```{r funs3, echo = TRUE}
y <- seq(1, 10)
y
```

## Conditional statements (if...else)
### If
An **if statement*"** is written with the `if` keyword, and it is used to specify a block of code to be executed if a condition is `TRUE`:

```{r if1, echo = TRUE}
a <- 1
b <- 200

if (b > a) {
  print("b is greater than a")
} 
```

>R uses curly brackets { } to define the scope in the code.

### Else If
The `else if` keyword is R's way of saying "if the previous conditions were not true, then try this condition":

```{r if2, echo = TRUE}
a <- 33
b <- 33

if (b > a) {
  print("b is greater than a")
} else if (a == b) {
  print ("a and b are equal")
} 
```

### Else
The `else` keyword catches anything which isn't caught by the preceding conditions:
```{r if3, echo = TRUE}
a <- 200
b <- 33

if (b > a) {
  print("b is greater than a")
} else if (a == b) {
  print("a and b are equal")
} else {
  print("a is greater than b")
} 
```

### AND
The `&` symbol (and) is a logical operator, and is used to combine conditional statements:
```{r if4, echo = TRUE}
a <- 200
b <- 33
c <- 500

if (a > b & c > a){
  print("Both conditions are true")
} 
```

### OR

The `|` symbol (or) is a logical operator, and is used to combine conditional statements:
```{r if5, echo = TRUE}
a <- 200
b <- 33
c <- 500

if (a > b | a > c){
  print("At least one of the conditions is true")
} 
```


## Loops
A for loop is used to iterate over a vector in R programming. 
```{r loop, echo=TRUE}
#Below is an example to count the number of even numbers in a vector.
x <- c(2, 5, 3, 9, 8, 11, 6)
count <- 0
for (i in x) {
  if(i %% 2 == 0) {
    count <- count + 1
  }
}
print(count)
```


# Packages
Packages are collections of R functions, data, and compiled code in a well-defined format. The directory where packages are stored is called the library. R comes with a standard set of packages. Others are available for download and installation. Once installed, they have to be loaded into the session to be used. 

## Adding packages
Befor using any function of a package, you have to install the package.

Packages can be installed from the R's own official package library **CRAN** (Comprehensive R Archive Network) or from Github (the largest platform for any developer of open-source software). 

> There are other sources, incl. private repositories. However, I do not recommend to download packages from such resources as the packages are not tested, documented, nor is there a guarantee that they will even cause any harm to your system. 

```{r pkg2, eval=FALSE, include=TRUE, echo=TRUE}
install.packages('remotes') # install package 'remotes' from CRAN
```

```{r pkg3, eval=FALSE, include=TRUE, echo=TRUE}
remotes::install_github('tobiste/PlateTectonicStressR') # install package 'PlateTectonicStressR' from my repositor on Github
```
You only have to install the package once. After that you have to load the the package.
`library()` allows to call the entire package, i.e. all the functions of the package: 
```{r pkg4, eval=FALSE, include=TRUE, echo=TRUE}
library('PlateTectonicStressR') 
```

`require()` combines the install (if necessary) and the loading of a package:
```{r pkg5, eval=FALSE, include=TRUE, echo=TRUE}
require('dplyr') 
```

If you only want to use a single function from a package, you just prompt the function by adding the package's name and `::` before the function call:
```{r pkg6, echo = TRUE}
# require('dadjoke') 
dadjoke::dadjoke()
```


## Help
Packges from CRAN or Github resources have a thorough documentation. Every function, therefor, has a description and details of the in- and output arguments, the mathematical background, references, and many more.
You can simply call this documentation by using  `?` and the name of the function:

```{r help, eval=FALSE, include=TRUE, echo=TRUE}
?max
help(c)
```

## Functions

In addition to R’s built-in functions, you can also define your own:

```{r fun, echo=TRUE}
cube <- function(n){  
    return(n^3)  
}  

# Using this function to take the cube of 3:  
c3 <- cube(3)  

```




# Useful resources

- **R for Data Science**
written by Hadley Wickham -- the ....
This **free** book will teach you how to do data science with R: You’ll learn how to get your data into R, get it into the most useful structure, transform it, visualise it and model it.
https://r4ds.had.co.nz/

- **Cheatsheets**
Eclectic, graphical, easy to understand, and handy summaries for some of the most important packages:
https://www.rstudio.com/resources/cheatsheets/

- **Stackoverflow**
Stack Overflow is a question and answer website for professional and enthusiast programmers. For most cases, the site is the first stop to find an answer. **There is an answer for almost every question!** The answers are rated, and the most useful answers are on top!
https://stackoverflow.com/

---

[next course: Data](R_turorial_2.html)
